<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Client Hub — LuminArch</title>
<meta name="description" content="Log in to your LuminArch Client Hub to submit website update requests, track ticket status, and manage your account.">
<meta name="robots" content="noindex, nofollow">
<link rel="canonical" href="https://luminarch.pro/client-hub.html">
<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=General+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="stylesheet" href="styles.css">
<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-XXXXXXXXXX');</script>
</head>
<body>
<!-- Smooth page transition -->
<div class="page-fade" id="pageFade"></div>

<!-- Global layers -->
<div class="bg-lines"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>
<canvas id="particles" aria-hidden="true"></canvas>
<div class="grain"></div>

<!-- Top bar — logo + back link -->
<div class="hub-topbar">
  <a href="index.html" class="hub-topbar__logo">
    <img src="images/logo-mark.svg" alt="LuminArch" width="28" height="28">
    <span>LuminArch</span>
  </a>
  <a href="index.html" class="hub-topbar__back">Back to site <span>&rarr;</span></a>
</div>

<!-- Centered login card -->
<div class="hub-page">
  <div class="hub-card" id="hubCard">
    <!-- Sign In view (default) -->
    <div class="hub-view" id="viewSignIn">
      <span class="label accent-text" style="text-align:center;display:block">Client Hub</span>
      <h1 class="h2" style="text-align:center;margin-top:8px">Welcome <em class="italic">back</em></h1>
      <p class="body-sm" style="color:var(--gray-light);text-align:center;margin-top:8px">Sign in to manage your website requests.</p>

      <form id="formSignIn" class="hub-form" style="margin-top:32px">
        <div class="form-group">
          <label class="label" for="si-email">Email</label>
          <input type="email" id="si-email" placeholder="you@business.com" required autocomplete="email">
        </div>
        <div class="form-group">
          <label class="label" for="si-password">Password</label>
          <input type="password" id="si-password" placeholder="Your password" required autocomplete="current-password">
        </div>
        <button type="submit" class="btn btn--filled magnetic" style="width:100%;justify-content:center">Sign In <span class="btn-arrow">&rarr;</span></button>
      </form>

      <div class="hub-divider"><span>or</span></div>

      <form id="formMagicLink" class="hub-form">
        <div class="form-group">
          <label class="label" for="ml-email">Email</label>
          <input type="email" id="ml-email" placeholder="you@business.com" required autocomplete="email">
        </div>
        <button type="submit" class="btn magnetic" style="width:100%;justify-content:center">Send Magic Link <span class="btn-arrow">&rarr;</span></button>
      </form>

      <p class="hub-footer-text">
        First time? <a href="#" id="showSignUp">Create your account</a>
      </p>
    </div>

    <!-- Sign Up view -->
    <div class="hub-view" id="viewSignUp" style="display:none">
      <span class="label accent-text" style="text-align:center;display:block">Client Hub</span>
      <h1 class="h2" style="text-align:center;margin-top:8px">Create <em class="italic">account</em></h1>
      <p class="body-sm" style="color:var(--gray-light);text-align:center;margin-top:8px">Set up your Client Hub access.</p>

      <form id="formSignUp" class="hub-form" style="margin-top:32px">
        <div class="form-group">
          <label class="label" for="su-name">Full Name</label>
          <input type="text" id="su-name" placeholder="Your full name" required autocomplete="name">
        </div>
        <div class="form-group">
          <label class="label" for="su-email">Email</label>
          <input type="email" id="su-email" placeholder="you@business.com" required autocomplete="email">
        </div>
        <div class="form-group">
          <label class="label" for="su-password">Password</label>
          <input type="password" id="su-password" placeholder="Choose a password (min 6 chars)" required minlength="6" autocomplete="new-password">
        </div>
        <button type="submit" class="btn btn--filled magnetic" style="width:100%;justify-content:center">Create Account <span class="btn-arrow">&rarr;</span></button>
      </form>

      <p class="hub-footer-text">
        Already have an account? <a href="#" id="showSignIn">Sign in</a>
      </p>
    </div>

    <!-- Magic link sent confirmation -->
    <div class="hub-view" id="viewMagicSent" style="display:none">
      <div style="text-align:center;padding:20px 0">
        <div class="hub-check-icon">&#10003;</div>
        <h2 class="h2" style="margin-top:16px">Check your <em class="italic">email</em></h2>
        <p class="body-sm" style="color:var(--gray-light);margin-top:12px">We sent a magic link to <strong id="magicEmailDisplay" style="color:var(--white)"></strong>. Click the link to sign in.</p>
        <a href="#" id="backToSignIn" class="btn magnetic" style="margin-top:32px">Back to Sign In <span class="btn-arrow">&rarr;</span></a>
      </div>
    </div>
  </div>
</div>

<!-- Toast container -->
<div class="hub-toast-container" id="toastContainer"></div>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script src="hub-auth.js"></script>
<!-- Particles + fireworks from shared scripts -->
<script>
(function(){
  var canvas=document.getElementById('particles');
  if(!canvas) return;
  var ctx=canvas.getContext('2d');
  var orbs=[], sparkles=[], ORB_COUNT=50;
  var isMobile=window.innerWidth<768||'ontouchstart' in window;

  var warmColors=[[255,180,60],[255,120,50],[255,80,80],[255,160,200],[245,215,80],[212,175,55]];
  var coolColors=[[80,160,255],[120,80,255],[60,220,200],[180,140,255],[100,200,255],[200,200,255]];
  function pickColor(){var p=Math.random()<0.5?warmColors:coolColors;return p[Math.floor(Math.random()*p.length)];}

  function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
  resize(); addEventListener('resize',resize);

  for(var i=0;i<ORB_COUNT;i++){
    var inter=!isMobile&&(i%2===0);
    orbs.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,
      r:inter?(Math.random()*2+3.5):(Math.random()*2+.8),
      dx:(Math.random()-.5)*.3,dy:(Math.random()-.5)*.15-.04,
      opacity:inter?(Math.random()*.35+.35):(Math.random()*.35+.1),
      hue:inter?(Math.random()<.4?'255,200,60':'230,190,50'):(Math.random()<.3?'245,215,80':'212,175,55'),
      interactive:inter,pulsePhase:Math.random()*Math.PI*2,alive:true,fadingIn:true,fadeProgress:Math.random()});
  }

  function spawnFirework(x,y){
    var count=Math.floor(Math.random()*11)+20;var bc=pickColor();
    for(var i=0;i<count;i++){var a=(Math.PI*2/count)*i+(Math.random()-.5)*.4;var sp=Math.random()*3+1.5;
      var cr=Math.min(255,Math.max(0,bc[0]+(Math.random()-.5)*40));
      var cg=Math.min(255,Math.max(0,bc[1]+(Math.random()-.5)*40));
      var cb=Math.min(255,Math.max(0,bc[2]+(Math.random()-.5)*40));
      sparkles.push({x:x,y:y,vx:Math.cos(a)*sp,vy:Math.sin(a)*sp-1.5,r:Math.random()*2+1,
        color:[Math.round(cr),Math.round(cg),Math.round(cb)],life:1,decay:Math.random()*.015+.012,trail:[]});
    }
  }

  function respawnOrb(o){
    var att=0,nx,ny,close;
    do{nx=Math.random()*canvas.width;ny=Math.random()*canvas.height;close=false;
      for(var j=0;j<orbs.length;j++){if(orbs[j].interactive&&orbs[j].alive&&orbs[j]!==o){
        var ddx=orbs[j].x-nx,ddy=orbs[j].y-ny;if(Math.sqrt(ddx*ddx+ddy*ddy)<120){close=true;break;}}}att++;
    }while(close&&att<15);
    o.x=nx;o.y=ny;o.alive=true;o.fadingIn=true;o.fadeProgress=0;o.r=Math.random()*2+3.5;
  }

  if(!isMobile){
    var skipTags={A:1,BUTTON:1,INPUT:1,TEXTAREA:1,SELECT:1,LABEL:1};
    document.addEventListener('click',function(e){
      var tag=e.target.tagName;
      if(skipTags[tag]||e.target.closest('a,button,input,textarea,select,.nav,.btn,.hub-card')) return;
      var mx=e.clientX,my=e.clientY;
      for(var i=0;i<orbs.length;i++){var o=orbs[i];
        if(!o.interactive||!o.alive) continue;
        var hr=o.r+14,ddx=o.x-mx,ddy=o.y-my;
        if(ddx*ddx+ddy*ddy<hr*hr){spawnFirework(o.x,o.y);o.alive=false;
          (function(ref){setTimeout(function(){respawnOrb(ref);},2000+Math.random()*2000);})(o);break;}
      }
    });
  }

  (function drawFrame(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(var i=0;i<orbs.length;i++){var o=orbs[i];
      if(!o.alive&&!o.fadingIn) continue;
      o.x+=o.dx;o.y+=o.dy;
      if(o.x<-10)o.x=canvas.width+10;if(o.x>canvas.width+10)o.x=-10;
      if(o.y<-10)o.y=canvas.height+10;if(o.y>canvas.height+10)o.y=-10;
      if(o.fadingIn){o.fadeProgress+=.01;if(o.fadeProgress>=1){o.fadeProgress=1;o.fadingIn=false;}}
      var dop=o.opacity*o.fadeProgress;var rad=o.r;
      if(o.interactive&&o.alive){o.pulsePhase+=.035;var pulse=Math.sin(o.pulsePhase);rad+=pulse*1.2;
        ctx.beginPath();ctx.arc(o.x,o.y,rad+8,0,6.283);ctx.fillStyle='rgba('+o.hue+','+(dop*.08)+')';ctx.fill();
        ctx.beginPath();ctx.arc(o.x,o.y,rad+4,0,6.283);ctx.fillStyle='rgba('+o.hue+','+(dop*.2)+')';ctx.fill();}
      ctx.beginPath();ctx.arc(o.x,o.y,rad,0,6.283);ctx.fillStyle='rgba('+o.hue+','+dop+')';ctx.fill();
    }
    for(var i=sparkles.length-1;i>=0;i--){var s=sparkles[i];
      s.trail.push({x:s.x,y:s.y,life:s.life});if(s.trail.length>4)s.trail.shift();
      s.vy+=.06;s.vx*=.985;s.vy*=.985;s.x+=s.vx;s.y+=s.vy;s.life-=s.decay;
      if(s.life<=0){sparkles.splice(i,1);continue;}
      for(var t=0;t<s.trail.length;t++){var tr=s.trail[t];var ta=(t/s.trail.length)*s.life*.3;
        ctx.beginPath();ctx.arc(tr.x,tr.y,s.r*.6,0,6.283);ctx.fillStyle='rgba('+s.color[0]+','+s.color[1]+','+s.color[2]+','+ta+')';ctx.fill();}
      ctx.beginPath();ctx.arc(s.x,s.y,s.r*s.life,0,6.283);ctx.fillStyle='rgba('+s.color[0]+','+s.color[1]+','+s.color[2]+','+s.life+')';ctx.fill();
      ctx.beginPath();ctx.arc(s.x,s.y,s.r*s.life*.4,0,6.283);ctx.fillStyle='rgba(255,255,255,'+(s.life*.6)+')';ctx.fill();
    }
    requestAnimationFrame(drawFrame);
  })();
})();
// Dismiss page fade and reveal content
(function(){
  var fade=document.getElementById('pageFade');
  var card=document.getElementById('hubCard');
  var topbar=document.querySelector('.hub-topbar');
  function reveal(){
    setTimeout(function(){
      if(fade) fade.classList.add('done');
      if(topbar) topbar.classList.add('visible');
      setTimeout(function(){
        if(card) card.classList.add('visible');
      },150);
    },60);
  }
  if(document.readyState==='complete') reveal();
  else window.addEventListener('load',reveal);
})();

/* Gold cursor trail (desktop only) */
(function(){
  if('ontouchstart' in window||window.innerWidth<768) return;
  if(!window.matchMedia('(pointer: fine)').matches) return;
  var TRAIL=8,LEAD=4,trail=[],mx=-100,my=-100,on=false;
  var c=document.createElement('canvas');
  c.style.cssText='position:fixed;inset:0;z-index:9999;pointer-events:none';
  document.body.appendChild(c);
  var cx=c.getContext('2d');
  function rs(){c.width=window.innerWidth;c.height=window.innerHeight}
  rs(); window.addEventListener('resize',rs);
  document.addEventListener('mousemove',function(e){mx=e.clientX;my=e.clientY;if(!on){on=true;draw()}});
  document.addEventListener('mouseleave',function(){on=false;trail=[];cx.clearRect(0,0,c.width,c.height)});
  var cols=['#F5D060','#E8C84A','#D4AF37','#C9A430','#B8942D'];
  function draw(){
    if(!on) return;
    trail.unshift({x:mx,y:my});
    if(trail.length>TRAIL) trail.length=TRAIL;
    cx.clearRect(0,0,c.width,c.height);
    for(var i=trail.length-1;i>=0;i--){
      var t=i/(TRAIL-1),r=LEAD*(1-t*0.75),a=0.9-t*0.85,p=trail[i];
      cx.beginPath();cx.arc(p.x,p.y,r+3,0,Math.PI*2);
      cx.fillStyle='rgba(245,208,96,'+(a*0.25)+')';cx.fill();
      cx.beginPath();cx.arc(p.x,p.y,r,0,Math.PI*2);
      cx.fillStyle=cols[Math.min(i,cols.length-1)];cx.globalAlpha=a;cx.fill();cx.globalAlpha=1;
    }
    requestAnimationFrame(draw);
  }
})();
</script>
</body>
</html>
